{% extends "base.html" %}
{% block content %}
<section>
    {% if item %}
        <h2>Movimentações do item {{ item.protocol }}</h2>
        <p><strong>Descrição:</strong> {{ item.description }}</p>
        <p><strong>Status:</strong> {{ item.status }}</p>
        <p><strong>Remetente:</strong> {{ item.sender }} | <strong>Destinatário:</strong> {{ item.recipient }}</p>
        <p><strong>Fechamento:</strong> {{ item.closed }}</p>

        {% if moves and moves|length > 0 %}
        <table>
            <tr><th>Tipo</th><th>Local</th><th>Nota</th><th>Data</th></tr>
            {% for m in moves %}
            <tr>
                <td>{{ m.type }}</td>
                <td>{{ m.location }}</td>
                <td>{{ m.note }}</td>
                <td>
                  {% if m.created_at %}
                    {{ m.created_at.strftime('%d/%m/%Y %H:%M') }}
                  {% else %}
                    -
                  {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
        {% else %}
            <table>
              <tr>
                <td colspan="4" style="text-align: center; font-style: italic; color: var(--muted);">
                  Nenhuma movimentação registrada.
                </td>
              </tr>
            </table>

        {% endif %}
    {% else %}
        <h2>Item não encontrado</h2>
        <p>Verifique o protocolo informado.</p>
    {% endif %}
</section>
{% endblock %}
