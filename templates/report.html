{% extends "base.html" %}
{% block content %}
<section class="panel-card">
  <h2>Gerar relatório</h2>
  <form method="post">
    <div class="form-group">
      <label for="start_date">Data inicial</label>
      <input id="start_date" type="date" name="start_date" required>
    </div>

    <div class="form-group">
      <label for="end_date">Data final</label>
      <input id="end_date" type="date" name="end_date" required>
    </div>

    <div class="form-group">
      <label for="section">Seção/Destinatário</label>
      <select id="section" name="section">
        <option>Seção 1</option>
        <option>Seção 2</option>
      </select>
    </div>

    <div class="form-group">
      <label><input type="checkbox" name="export_csv"> Exportar em CSV</label>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn-primary">Gerar</button>
      <a href="{{ url_for('index') }}" class="btn-secondary">Voltar</a>
    </div>
  </form>

  <h3>Resultado</h3>
  <table>
    <thead>
      <tr>
        <th>Protocolo</th>
        <th>Descrição</th>
        <th>Status</th>
        <th>Remetente</th>
        <th>Destinatário</th>
        <th>Fechamento</th>
      </tr>
    </thead>
    <tbody>
      {% for item in report %}
      <tr>
        <td>{{ item.protocolo }}</td>
        <td>{{ item.descricao }}</td>
        <td>{{ item.status }}</td>
        <td>{{ item.remetente }}</td>
        <td>{{ item.destinatario }}</td>
        <td>{{ item.fechamento or '' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
