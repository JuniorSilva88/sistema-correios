{% extends "base.html" %}
{% block content %}
<section class="form-card">
  <h2>ğŸ‘¥ GestÃ£o de UsuÃ¡rios</h2>

  <!-- FormulÃ¡rio de cadastro -->
  <form method="post" class="user-form">
    <div class="form-group">
      <label for="username">ğŸ§‘ UsuÃ¡rio</label>
      <input id="username" type="text" name="username" required>
    </div>

    <div class="form-group">
      <label for="email">ğŸ“§ Email</label>
      <input id="email" type="email" name="email" required>
    </div>

    <div class="form-group">
      <label for="password">ğŸ”‘ Senha</label>
      <input id="password" type="password" name="password" required>
    </div>

    <div class="form-group">
      <label for="role">âš™ï¸ FunÃ§Ã£o</label>
      <select id="role" name="role">
        <option value="user">ğŸ‘¤ UsuÃ¡rio</option>
        <option value="admin">ğŸ‘‘ Admin</option>
      </select>
    </div>

    <button type="submit" class="btn-primary">â• Cadastrar</button>
  </form>
</section>

<hr>

<!-- Lista de usuÃ¡rios -->
<section class="user-list">
  <h3>ğŸ“‹ UsuÃ¡rios cadastrados</h3>
  <table>
    <thead>
      <tr>
        <th>ğŸ§‘ UsuÃ¡rio</th>
        <th>ğŸ“§ Email</th>
        <th>âš™ï¸ FunÃ§Ã£o</th>
        <th>ğŸ“Œ Status</th> <!-- NOVO -->
        <th>ğŸ› ï¸ AÃ§Ãµes</th>
      </tr>
    </thead>
    <tbody>
      {% for u in users %}
      <tr>
        <td>{{ u.username }}</td>
        <td>{{ u.email }}</td>
        <td>
          {% if u.role == "admin" %}
            ğŸ‘‘ Admin
          {% else %}
            ğŸ‘¤ UsuÃ¡rio
          {% endif %}
        </td>
        <td>
          {% if u.status == "ativo" %}
            âœ”ï¸ Ativo
          {% elif u.status == "pendente" %}
            â³ Pendente
          {% else %}
            âŒ Inativo
          {% endif %}
        </td>
        <td>
          <a href="{{ url_for('edit_user', user_id=u.id) }}" class="btn-secondary">âœï¸ Editar</a>
          <form method="post" action="{{ url_for('delete_user', user_id=u.id) }}" style="display:inline;" onsubmit="return confirm('âŒ Tem certeza que deseja excluir este usuÃ¡rio?')">
            <button type="submit" class="btn-danger">ğŸ—‘ï¸ Excluir</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>

{% endblock %}
