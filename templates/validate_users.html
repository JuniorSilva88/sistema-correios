{% extends "base.html" %}
{% block content %}
<section class="form-card">
  <h2>âœ… ValidaÃ§Ã£o de UsuÃ¡rios</h2>
  <p>Lista de usuÃ¡rios pendentes ou jÃ¡ cadastrados. O administrador pode aprovar ou rejeitar.</p>

  <table>
    <thead>
      <tr>
        <th>ğŸ§‘ UsuÃ¡rio</th>
        <th>ğŸ“§ Email</th>
        <th>âš™ï¸ FunÃ§Ã£o</th>
        <th>ğŸ“Œ Status</th>
        <th>ğŸ› ï¸ AÃ§Ãµes</th>
      </tr>
    </thead>
    <tbody>
      {% for u in users %}
      <tr>
        <td>{{ u.username }}</td>
        <td>{{ u.email }}</td>
        <td>
          {% if u.role == "admin" %}
            ğŸ‘‘ Admin
          {% else %}
            ğŸ‘¤ UsuÃ¡rio
          {% endif %}
        </td>
        <td>
          {% if u.status == "ativo" %}
            âœ”ï¸ Ativo
          {% elif u.status == "pendente" %}
            â³ Pendente
          {% else %}
            âŒ Inativo
          {% endif %}
        </td>
        <td>
          {% if u.status == "pendente" %}
            <form method="post" style="display:inline;">
              <input type="hidden" name="user_id" value="{{ u.id }}">
              <input type="hidden" name="action" value="aprovar">
              <button type="submit" class="btn-primary">âœ”ï¸ Aprovar</button>
            </form>
            <form method="post" style="display:inline;">
              <input type="hidden" name="user_id" value="{{ u.id }}">
              <input type="hidden" name="action" value="rejeitar">
              <button type="submit" class="btn-danger">âŒ Rejeitar</button>
            </form>
          {% else %}
            <span class="muted">Sem aÃ§Ãµes</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
